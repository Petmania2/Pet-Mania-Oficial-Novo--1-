<script>
// Integra√ß√£o Mercado Pago Checkout
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.trainer-btn').forEach(function(btn) {
        btn.addEventListener('click', async function(e) {
            e.preventDefault();
            
            // Verificar se usu√°rio est√° logado
            const authRes = await fetch('/check-auth');
            const authData = await authRes.json();
            
            if (!authData.loggedIn) {
                window.location.href = '/Login.ejs';
                return;
            }
            
            const card = btn.closest('.trainer-card');
            const name = card.querySelector('.trainer-name').textContent.trim();
            
            // Mapear telefones dos adestradores
            const telefones = {
                'Ricardo Almeida': '(11) 99999-1111',
                'Juliana Costa': '(21) 99999-2222',
                'Carlos Mendes': '(31) 99999-3333',
                'Ana Silva': '(41) 99999-4444',
                'Pedro Santos': '(51) 99999-5555',
                'Mariana Lima': '(61) 99999-6666'
            };
            
            const telefone = telefones[name];
            const whatsappNumber = telefone.replace(/\D/g, '');
            const whatsappUrl = `https://wa.me/55${whatsappNumber}?text=Ol√°! Gostaria de agendar uma sess√£o de adestramento.`;
            
            if (confirm(`Entrar em contato com ${name}?\nTelefone: ${telefone}\n\nClique OK para abrir WhatsApp`)) {
                window.open(whatsappUrl, '_blank');
            }
        });
    });
});
</script>
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pet Mania - Conectando Adestradores e Donos de C√£es</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/ai-chat.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body>
    <header>
        <nav class="navbar" id="navbar">
            <section class="container navbar-container">
                <a href="/" class="logo">
                    <img src="/imagens/petlogo.png" alt="Pet Mania" class="logo-img">
                </a>
                <ul class="nav-links" id="navLinks">
                    <li><a href="painelcliente" class="nav-item" id="contaLink"><i class="fas fa-user"></i> Conta</a></li>
                    <li><a href="#find-trainer" class="nav-item"><i class="fas fa-search"></i> Encontrar</a></li>
                    <li><a href="/adestradores.ejs" class="nav-item"><i class="fas fa-users"></i> Adestradores</a></li>
                    <li><a href="#how-it-works" class="nav-item"><i class="fas fa-question-circle"></i> Como Funciona</a></li>
                    <li><a href="#contact" class="nav-item"><i class="fas fa-envelope"></i> Contato</a></li>
                    <li><a href="Login.ejs" class="btn btn-outline"><i class="fas fa-sign-in-alt"></i> Entrar</a></li>
                </ul>
                <button class="mobile-menu-btn" id="menuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </section>
        </nav>
    </header>
    <main>
        <!-- Hero Section -->
        <section class="hero" id="home">
            <section class="hero-overlay"></section>
            <section class="container hero-content">
                <section class="hero-text">
                    <h1>Transforme o Comportamento do seu Pet</h1>
                    <p>Encontre os melhores adestradores profissionais para seu c√£o. Treinamento personalizado e resultados garantidos.</p>
                    <section class="hero-buttons">
                        <a href="/cliente.ejs" class="btn btn-primary">
                            <i class="fas fa-user-plus"></i> Cadastrar como Cliente
                        </a>
                        <a href="/Cadastroadestrador.ejs" class="btn btn-secondary">
                            <i class="fas fa-paw"></i> Cadastrar como Adestrador
                        </a>
                    </section>
                </section>
                <figure class="hero-image">
                    <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80" alt="C√£o feliz com seu treinador">
                </figure>
            </section>
        </section>

        <!-- Encontre um Adestrador Section -->
        <section class="find-trainer" id="find-trainer">
            <section class="container">
                <h2 class="section-title">üìç Encontre um Adestrador Perto de Voc√™</h2>
                
                <section class="location-search">
                    <form class="location-search-form">
                        <section class="form-content">
                            <h3>Busque por Localiza√ß√£o</h3>
                            <p>Digite sua cidade ou estado para encontrar adestradores pr√≥ximos a voc√™</p>
                            
                            <section class="search-group">
                                <section class="input-wrapper">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <input type="text" id="locationInput" placeholder="Digite sua cidade ou estado">
                                </section>
                                <button class="btn btn-primary" id="findLocationBtn">
                                    <i class="fas fa-search"></i> Buscar
                                </button>
                            </section>
                            
                            <section class="popular-locations">
                                <p>Locais populares:</p>
                                <section class="location-tags">
                                    <span class="location-tag">S√£o Paulo</span>
                                    <span class="location-tag">Rio de Janeiro</span>
                                    <span class="location-tag">Belo Horizonte</span>
                                    <span class="location-tag">Curitiba</span>
                                </section>
                            </section>
                        </section>
                    </form>
                    
                    <aside class="location-map">
                        <section class="map-container">
                            <section id="map" style="height: 400px; border-radius: 10px;"></section>
                            <section class="map-controls" style="margin-top: 10px; display: flex; gap: 10px; flex-wrap: wrap;">
                                <button id="findMyLocation" class="btn btn-outline" style="padding: 8px 12px; font-size: 0.9rem;" aria-label="Encontrar minha localiza√ß√£o">
                                    <i class="fas fa-crosshairs"></i> Minha Localiza√ß√£o
                                </button>
                                <input type="text" id="addressSearch" placeholder="Digite um endere√ßo..." style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 5px;" aria-label="Campo de busca de endere√ßo">
                                <button id="searchAddress" class="btn btn-primary" style="padding: 8px 12px; font-size: 0.9rem;" aria-label="Buscar endere√ßo">
                                    <i class="fas fa-search"></i> Buscar
                                </button>
                                <select id="radiusFilter" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px;" aria-label="Filtrar por raio de dist√¢ncia">
                                    <option value="5">5 km</option>
                                    <option value="10" selected>10 km</option>
                                    <option value="20">20 km</option>
                                    <option value="50">50 km</option>
                                </select>
                            </section>
                        </section>
                    </aside>
                </section>
                
                <section class="location-benefits">
                    <section class="benefit-card">
                        <section class="benefit-icon">
                            <i class="fas fa-walking"></i>
                        </section>
                        <h3>Adestradores Pr√≥ximos</h3>
                        <p>Encontre profissionais que podem atender em sua resid√™ncia ou regi√£o</p>
                    </section>
                    
                    <section class="benefit-card">
                        <section class="benefit-icon">
                            <i class="fas fa-star"></i>
                        </section>
                        <h3>Avalia√ß√µes Verificadas</h3>
                        <p>Veja feedback de clientes anteriores para escolher o melhor</p>
                    </section>
                    
                    <section class="benefit-card">
                        <section class="benefit-icon">
                            <i class="fas fa-calendar-check"></i>
                        </section>
                        <h3>Agendamento F√°cil</h3>
                        <p>Marque sess√µes conforme sua disponibilidade e necessidade</p>
                    </section>
                </section>
            </section>
        </section>

        <!-- Trainers Section -->
        <section class="trainers" id="trainers">
            <section class="container">
                <h2 class="section-title">Adestradores em Destaque</h2>
                
                <section class="search-filters">
                    <section class="search-bar">
                        <input type="text" placeholder="Busque por nome ou especialidade..." id="searchInput">
                        <button id="searchBtn"><i class="fas fa-search"></i> Buscar</button>
                    </section>
                    <section class="filters">
                        <select class="filter-select" id="cityFilter" aria-label="Filtrar por cidade">
                            <option value="">Todas as Cidades</option>
                            <option value="sao-paulo">S√£o Paulo</option>
                            <option value="rio-de-janeiro">Rio de Janeiro</option>
                            <option value="belo-horizonte">Belo Horizonte</option>
                            <option value="curitiba">Curitiba</option>
                        </select>
                        <select class="filter-select" id="priceFilter" aria-label="Filtrar por pre√ßo">
                            <option value="">Todos os Pre√ßos</option>
                            <option value="ate-100">At√© R$ 100</option>
                            <option value="100-200">R$ 100 - R$ 200</option>
                            <option value="200-300">R$ 200 - R$ 300</option>
                            <option value="acima-300">Acima de R$ 300</option>
                        </select>
                        <select class="filter-select" id="trainingFilter" aria-label="Filtrar por tipo de treinamento">
                            <option value="">Todos os Treinamentos</option>
                            <option value="obediencia-basica">Obedi√™ncia B√°sica</option>
                            <option value="comportamento">Problemas de Comportamento</option>
                            <option value="truques">Truques e Comandos</option>
                            <option value="agressividade">Controle de Agressividade</option>
                        </select>
                    </section>
                </section>
                
                <section class="trainers-grid">
                    <!-- Adestradores do Banco de Dados -->
                    <% if (adestradores && adestradores.length > 0) { %>
                        <% adestradores.slice(0, 3).forEach(function(adestrador) { %>
                            <article class="trainer-card">
                                <header class="trainer-header">
                                    <section class="trainer-rating">
                                        <i class="fas fa-star"></i> 4.8
                                    </section>
                                    <section class="trainer-badge">
                                        <i class="fas fa-medal"></i> Novo
                                    </section>
                                </header>
                                <figure class="trainer-img">
                                    <% if (adestrador.ID_PERFIL) { %>
                                        <img src="/imagem/<%= adestrador.ID_PERFIL %>" alt="<%= adestrador.nome %>">
                                    <% } else { %>
                                        <img src="https://ui-avatars.com/api/?name=<%= encodeURIComponent(adestrador.nome) %>&size=400&background=FFA500&color=fff" alt="<%= adestrador.nome %>">
                                    <% } %>
                                </figure>
                                <section class="trainer-info">
                                    <h3 class="trainer-name"><%= adestrador.nome %></h3>
                                    <p class="trainer-specialty"><i class="fas fa-certificate"></i> Adestrador Profissional</p>
                                    <address class="trainer-location"><i class="fas fa-map-marker-alt"></i> <%= adestrador.cidade || 'Cidade' %>, <%= adestrador.estado || 'UF' %></address>
                                    <p class="trainer-experience"><i class="fas fa-clock"></i> <%= adestrador.anos_experiencia || 0 %> anos de experi√™ncia</p>
                                    <section class="trainer-reviews">
                                        <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                        <span>(Novo)</span>
                                    </section>
                                    <section class="trainer-price-info" style="display: flex; align-items: center; gap: 8px;">
                                        <span class="price-label">Pre√ßo por sess√£o:</span>
                                        <data class="price-value" value="<%= adestrador.preco %>">R$ <%= parseFloat(adestrador.preco || 0).toFixed(2).replace('.', ',') %></data>
                                    </section>
                                    <a href="#" class="btn btn-primary trainer-btn" data-telefone="<%= adestrador.telefone %>">Agendar Sess√£o</a>
                                </section>
                            </article>
                        <% }); %>
                    <% } %>

                    <!-- Adestradores Fict√≠cios -->
                    <article class="trainer-card">
                        <header class="trainer-header">
                            <section class="trainer-rating">
                                <i class="fas fa-star"></i> 5.0
                            </section>
                            <section class="trainer-badge">
                                <i class="fas fa-medal"></i> Top Adestrador
                            </section>
                        </header>
                        <figure class="trainer-img">
                            <img src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80" alt="Ricardo Almeida">
                        </figure>
                        <section class="trainer-info">
                            <h3 class="trainer-name">Ricardo Almeida</h3>
                            <p class="trainer-specialty"><i class="fas fa-certificate"></i> Especialista em Obedi√™ncia B√°sica</p>
                            <address class="trainer-location"><i class="fas fa-map-marker-alt"></i> S√£o Paulo, SP</address>
                            <p class="trainer-experience"><i class="fas fa-clock"></i> 8 anos de experi√™ncia</p>
                            <section class="trainer-reviews">
                                <span class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span>(57 avalia√ß√µes)</span>
                            </section>
                            <section class="trainer-price-info" style="display: flex; align-items: center; gap: 8px;">
                                <span class="price-label">Pre√ßo por sess√£o:</span>
                                <data class="price-value" value="150">R$ 150</data>
                            </section>
                            <a href="#" class="btn btn-primary trainer-btn">Agendar Sess√£o</a>
                        </section>
                    </article>
                
                    <article class="trainer-card">
                        <section class="trainer-header">
                            <section class="trainer-rating">
                                <i class="fas fa-star"></i> 4.9
                            </section>
                        </section>
                        <section class="trainer-img">
                            <img src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80" alt="Juliana Costa">
                        </section>
                        <section class="trainer-info">
                            <h3 class="trainer-name">Juliana Costa</h3>
                            <p class="trainer-specialty"><i class="fas fa-certificate"></i> Comportamento Canino</p>
                            <p class="trainer-location"><i class="fas fa-map-marker-alt"></i> Rio de Janeiro, RJ</p>
                            <p class="trainer-experience"><i class="fas fa-clock"></i> 10 anos de experi√™ncia</p>
                            <section class="trainer-reviews">
                                <section class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</section>
                                <span>(43 avalia√ß√µes)</span>
                            </section>
                            <section class="trainer-price-info" style="display: flex; align-items: center; gap: 8px;">
                                <span class="price-label">Pre√ßo por sess√£o:</span>
                                <span class="price-value">R$ 180</span>
                            </section>
                            <a href="#" class="btn btn-primary trainer-btn">Agendar Sess√£o</a>
                        </section>
                    </article>
                    
                    <article class="trainer-card">
                        <section class="trainer-header">
                            <section class="trainer-rating">
                                <i class="fas fa-star"></i> 4.8
                            </section>
                            <section class="trainer-badge">
                                <i class="fas fa-award"></i> Especialista
                            </section>
                        </section>
                        <section class="trainer-img">
                            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80" alt="Carlos Mendes">
                        </section>
                        <section class="trainer-info">
                            <h3 class="trainer-name">Carlos Mendes</h3>
                            <p class="trainer-specialty"><i class="fas fa-certificate"></i> Controle de Agressividade</p>
                            <p class="trainer-location"><i class="fas fa-map-marker-alt"></i> Belo Horizonte, MG</p>
                            <p class="trainer-experience"><i class="fas fa-clock"></i> 12 anos de experi√™ncia</p>
                            <section class="trainer-reviews">
                                <section class="stars">‚≠ê‚≠ê‚≠ê‚≠ê</section>
                                <span>(38 avalia√ß√µes)</span>
                            </section>
                            <section class="trainer-price-info" style="display: flex; align-items: center; gap: 8px;">
                                <span class="price-label">Pre√ßo por sess√£o:</span>
                                <span class="price-value">R$ 220</span>
                            </section>
                            <a href="#" class="btn btn-primary trainer-btn">Agendar Sess√£o</a>
                        </section>
                    </article>
                </section>
                
                <section class="see-more-container">
                    <a href="/adestradores.ejs" class="btn btn-outline-primary">Ver Mais Adestradores</a>
                </section>
            </section>
        </section>

        <!-- Como Funciona Section -->
        <section class="how-it-works" id="how-it-works">
            <section class="container">
                <h2 class="section-title">Como Funciona?</h2>
                <ol class="steps-container">
                    <li class="step">
                        <section class="step-icon">
                            <i class="fas fa-search"></i>
                        </section>
                        <h3>1. Escolha um Adestrador</h3>
                        <p>Encontre o profissional perfeito de acordo com sua localiza√ß√£o, especialidade e avalia√ß√µes de outros clientes.</p>
                    </li>
                    <li class="step">
                        <section class="step-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </section>
                        <h3>2. Agende uma Sess√£o</h3>
                        <p>Escolha a data e hor√°rio mais convenientes para voc√™ atrav√©s do nosso calend√°rio interativo.</p>
                    </li>
                    <li class="step">
                        <section class="step-icon">
                            <i class="fas fa-credit-card"></i>
                        </section>
                        <h3>3. Pague Online</h3>
                        <p>Realize o pagamento de forma segura atrav√©s de Pix, Cart√£o de Cr√©dito ou Boleto.</p>
                    </li>
                    <li class="step">
                        <section class="step-icon">
                            <i class="fas fa-dog"></i>
                        </section>
                        <h3>4. Comece o Treinamento</h3>
                        <p>Inicie as sess√µes de adestramento e veja a transforma√ß√£o do comportamento do seu c√£o.</p>
                    </li>
                </ol>
            </section>
        </section>
    </main>

    <!-- Footer Section -->
    <footer class="footer" id="contact">
        <section class="container">
            <section class="footer-container">
                <section class="footer-info">
                    <section class="footer-logo">
                        <img src="/imagens/petlogo.png" alt="Pet Mania" class="footer-logo-img">
                        <span>Pet Mania</span>
                    </section>
                    <p>Conectando donos de c√£es a adestradores profissionais qualificados. Transforme o comportamento do seu pet com treinamento personalizado e eficiente.</p>
                    <section class="footer-social">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </section>
                </section>
                
                <nav class="footer-links">
                    <h3>Links R√°pidos</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#find-trainer">Encontrar</a></li>
                        <li><a href="#trainers">Adestradores</a></li>
                        <li><a href="#how-it-works">Como Funciona</a></li>
                        <li><a href="blog.html">Blog</a></li>
                        <li><a href="login.html">Entrar</a></li>
                    </ul>
                </nav>
                
                <nav class="footer-links">
                    <h3>Suporte</h3>
                    <ul>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Termos de Uso</a></li>
                        <li><a href="#">Pol√≠tica de Privacidade</a></li>
                        <li><a href="#">Central de Ajuda</a></li>
                    </ul>
                </nav>
                
                <address class="footer-contact">
                    <h3>Contato</h3>
                    <section class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>Av. Paulista, 1000, S√£o Paulo - SP</p>
                    </section>
                    <section class="contact-item">
                        <i class="fas fa-phone"></i>
                        <p><a href="tel:+5511999999999">(11) 99999-9999</a></p>
                    </section>
                    <section class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <p><a href="mailto:contato@petmania.com.br">contato@petmania.com.br</a></p>
                    </section>
                </address>
            </section>
            
            <section class="footer-bottom">
                <p>&copy; 2025 Pet Mania. Todos os direitos reservados.</p>
            </section>
        </section>
    </footer>



    <a href="#home" class="scroll-top" id="scrollTop">
        <i class="fas fa-arrow-up"></i>
    </a>

    <!-- Modal de Perfil do Adestrador (igual adestradores.ejs) -->
<section class="trainer-profile-modal" id="trainerProfileModal" style="display:none;">
    <section class="modal-overlay" id="modalOverlay"></section>
    <section class="modal-content">
        <header class="modal-header">
            <h2>Perfil do Adestrador</h2>
            <button class="modal-close" id="modalClose">
                <i class="fas fa-times"></i>
            </button>
        </header>
        <section class="modal-body">
            <section class="trainer-profile-card">
                <section class="profile-image">
                    <img id="profileImage" src="" alt="Foto do Adestrador">
                    <section class="profile-badge" id="profileBadge" style="display: none;">
                        <i class="fas fa-medal"></i>
                        <span id="badgeText"></span>
                    </section>
                </section>
                <section class="profile-info">
                    <section class="profile-section">
                        <h3 id="profileName">Nome do Adestrador</h3>
                        <section class="profile-rating">
                            <span class="stars" id="profileStars"></span>
                            <span id="profileReviews">(0 avalia√ß√µes)</span>
                        </section>
                    </section>
                    <section class="profile-details">
                        <section class="detail-item">
                            <i class="fas fa-phone"></i>
                            <label>Telefone:</label>
                            <span class="phone-number">
                                <span id="phonePartial"></span>
                                <button class="see-more-btn" id="seeMorePhone">Ver mais</button>
                            </span>
                        </section>
                        <section class="detail-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <label>Endere√ßo:</label>
                            <span id="profileAddress"></span>
                        </section>
                        <section class="detail-item">
                            <i class="fas fa-city"></i>
                            <label>Cidade:</label>
                            <span id="profileCity"></span>
                        </section>
                        <section class="detail-item">
                            <i class="fas fa-map"></i>
                            <label>Estado:</label>
                            <span id="profileState"></span>
                        </section>
                        <section class="detail-item">
                            <i class="fas fa-clock"></i>
                            <label>Experi√™ncia:</label>
                            <span id="profileExperience"></span>
                        </section>
                        <section class="detail-item">
                            <i class="fas fa-certificate"></i>
                            <label>Especialidades:</label>
                            <section class="specialties-list" id="profileSpecialties"></section>
                        </section>
                        <section class="detail-item">
                            <i class="fas fa-dollar-sign"></i>
                            <label>Pre√ßo por Sess√£o:</label>
                            <span class="price-highlight" id="profilePrice"></span>
                        </section>
                        <section class="detail-item biography-section">
                            <i class="fas fa-user"></i>
                            <label>Sobre:</label>
                            <p id="profileBiography"></p>
                        </section>
                    </section>
                    <section class="profile-actions">
                        <button class="btn btn-primary" id="scheduleSessionBtn">
                            <i class="fas fa-calendar-alt"></i>
                            Agendar Sess√£o
                        </button>
                    </section>
                </section>
            </section>
        </section>
    </section>
</section>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Mapa interativo de adestradores
        let map, userMarker;
        const adestradores = [
            { nome: 'Jo√£o Silva', lat: -23.5105, lng: -46.8761, especialidade: 'Obedi√™ncia B√°sica', preco: 'R$ 120', telefone: '(11) 99999-1111' },
            { nome: 'Maria Santos', lat: -23.5089, lng: -46.8788, especialidade: 'Comportamento Canino', preco: 'R$ 150', telefone: '(11) 99999-2222' },
            { nome: 'Carlos Oliveira', lat: -23.5158, lng: -46.8796, especialidade: 'Truques Avan√ßados', preco: 'R$ 180', telefone: '(11) 99999-3333' },
            { nome: 'Ana Costa', lat: -23.5201, lng: -46.8745, especialidade: 'Adestramento de Filhotes', preco: 'R$ 140', telefone: '(11) 99999-4444' },
            { nome: 'Pedro Almeida', lat: -23.5067, lng: -46.8812, especialidade: 'Controle de Agressividade', preco: 'R$ 200', telefone: '(11) 99999-5555' },
            { nome: 'Fernanda Lima', lat: -23.5134, lng: -46.8723, especialidade: 'Socializa√ß√£o Canina', preco: 'R$ 160', telefone: '(11) 99999-6666' },
            { nome: 'Roberto Santos', lat: -23.5178, lng: -46.8801, especialidade: 'Obedi√™ncia Avan√ßada', preco: 'R$ 190', telefone: '(11) 99999-7777' },
            { nome: 'Juliana Ferreira', lat: -23.5045, lng: -46.8734, especialidade: 'Terapia Comportamental', preco: 'R$ 220', telefone: '(11) 99999-8888' },
            { nome: 'Marcos Rodrigues', lat: -23.5189, lng: -46.8756, especialidade: 'Adestramento Esportivo', preco: 'R$ 170', telefone: '(11) 99999-9999' },
            { nome: 'Carla Mendes', lat: -23.5112, lng: -46.8789, especialidade: 'C√£es de Guarda', preco: 'R$ 210', telefone: '(11) 99999-0000' }
        ];
        
        function initMap() {
            map = L.map('map').setView([-23.5105, -46.8761], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
            
            adestradores.forEach(adestrador => {
                const marker = L.marker([adestrador.lat, adestrador.lng]).addTo(map);
                marker.bindPopup(`
                    <section style="text-align: center; min-width: 200px;">
                        <h4 style="margin: 0 0 8px 0; color: #FFA500;">${adestrador.nome}</h4>
                        <p style="margin: 4px 0;"><i class="fas fa-certificate"></i> ${adestrador.especialidade}</p>
                        <p style="margin: 4px 0; font-weight: bold; color: #28a745;">${adestrador.preco}/sess√£o</p>
                        <p style="margin: 4px 0;"><i class="fas fa-phone"></i> ${adestrador.telefone}</p>
                        <button onclick="alert('Redirecionando para agendamento...')" style="background: #FFA500; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; margin-top: 8px;">Agendar</button>
                    </section>
                `);
            });
        }
        
        function findMyLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(position => {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    
                    if (userMarker) map.removeLayer(userMarker);
                    userMarker = L.marker([lat, lng], {
                        icon: L.icon({
                            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
                            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                            iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41]
                        })
                    }).addTo(map);
                    
                    userMarker.bindPopup('Voc√™ est√° aqui!').openPopup();
                    map.setView([lat, lng], 13);
                    filterAdestradores(lat, lng);
                }, () => alert('N√£o foi poss√≠vel obter sua localiza√ß√£o'));
            }
        }
        
        function searchAddress() {
            const address = document.getElementById('addressSearch').value;
            if (!address) return;
            
            fetch(`https://photon.komoot.io/api/?q=${encodeURIComponent(address)}&limit=1`)
                .then(response => response.json())
                .then(data => {
                    if (data.features && data.features.length > 0) {
                        const [lng, lat] = data.features[0].geometry.coordinates;
                        
                        if (userMarker) map.removeLayer(userMarker);
                        userMarker = L.marker([lat, lng], {
                            icon: L.icon({
                                iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
                                shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                                iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41]
                            })
                        }).addTo(map);
                        
                        userMarker.bindPopup(`Localiza√ß√£o: ${address}`).openPopup();
                        map.setView([lat, lng], 13);
                        filterAdestradores(lat, lng);
                    } else {
                        alert('Endere√ßo n√£o encontrado');
                    }
                })
                .catch(() => alert('Erro ao buscar endere√ßo'));
        }
        
        function filterAdestradores(userLat, userLng) {
            const radius = parseInt(document.getElementById('radiusFilter').value);
            
            adestradores.forEach(adestrador => {
                const distance = getDistance(userLat, userLng, adestrador.lat, adestrador.lng);
                // Aqui voc√™ pode implementar l√≥gica para mostrar/ocultar marcadores baseado na dist√¢ncia
            });
        }
        
        function getDistance(lat1, lng1, lat2, lng2) {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLng/2) * Math.sin(dLng/2);
            return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            initMap();
            document.getElementById('findMyLocation').addEventListener('click', findMyLocation);
            document.getElementById('searchAddress').addEventListener('click', searchAddress);
            document.getElementById('addressSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchAddress();
            });
            document.getElementById('radiusFilter').addEventListener('change', function() {
                if (userMarker) {
                    const pos = userMarker.getLatLng();
                    filterAdestradores(pos.lat, pos.lng);
                }
            });
        });
    </script>

    <script src="/js/auth-header.js"></script>
    <script src="/js/javascript.js"></script>
    <script src="/js/adestradores.js"></script>
    <script src="/js/ai-chat.js"></script>
</body>
</html>
